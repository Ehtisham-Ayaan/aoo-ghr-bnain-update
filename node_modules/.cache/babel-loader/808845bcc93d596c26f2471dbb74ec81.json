{"ast":null,"code":"import GenericServices from \"./GenericServices\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\n\nclass userServices extends GenericServices {\n  constructor(...args) {\n    super(...args);\n\n    this.login = (userName, password) => // axios.post('http://localhost:5000/auth', {userName, password} )\n    //             .then((res) =>{ \n    //                             // this.data = res.data\n    //                             console.log(res.status);\n    //                             console.log(res.isLoggedin);\n    //                 if(res.isLoggedin){\n    //                     window.location.href = '/welcome ';\n    //                 }});\n    new Promise((resolve, reject) => {\n      console.log(userName, password);\n      axios.post(\"http://localhost:5000/auth\", {\n        userName,\n        password\n      }).then(token => {\n        localStorage.setItem(\"token\", token);\n        resolve(token);\n\n        if (token.data === \"connected\") {\n          console.log('Hi');\n        }\n      }).catch(err => {\n        reject(err);\n      });\n    });\n\n    this.register = (username, email, password) => new Promise((resolve, reject) => {\n      console.log(username);\n      this.post(\"http://localhost:5000/register\", {\n        username,\n        email,\n        password\n      }).then(res => {\n        resolve(res);\n      }).catch(err => {\n        reject(err);\n      });\n    });\n\n    this.logout = () => {\n      localStorage.removeItem(\"token\");\n      window.location.href = \"/\";\n    };\n\n    this.getLoggedinfo = () => {\n      try {\n        let jwt = localStorage.getItem(\"token\");\n        var decode = jwt_decode(jwt);\n        return decode;\n      } catch (error) {\n        console.log(\"error\");\n      }\n    };\n\n    this.isAdmin = () => {\n      if (this.isLoggedIn()) {\n        if (this.getLoggedinfo().role === \"admin\") return true;else return false;\n      } else return false;\n    };\n  }\n\n}\n\nlet UserServices = new userServices();\nexport default UserServices;","map":{"version":3,"sources":["/home/ehtisham/MyApp/myapp/client/src/services/UserServices.js"],"names":["GenericServices","jwt_decode","axios","userServices","login","userName","password","Promise","resolve","reject","console","log","post","then","token","localStorage","setItem","data","catch","err","register","username","email","res","logout","removeItem","window","location","href","getLoggedinfo","jwt","getItem","decode","error","isAdmin","isLoggedIn","role","UserServices"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,mBAA5B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,MAAMC,YAAN,SAA2BH,eAA3B,CAA2C;AAAA;AAAA;;AAAA,SACzCI,KADyC,GACjC,CAACC,QAAD,EAAWC,QAAX,KAGR;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEE,QAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAE/BC,MAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ,EAAuBC,QAAvB;AAEAJ,MAAAA,KAAK,CAACU,IAAN,CAAW,4BAAX,EAAyC;AAAEP,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAzC,EACGO,IADH,CACSC,KAAD,IAAW;AACfC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACAN,QAAAA,OAAO,CAACM,KAAD,CAAP;;AACA,YAAGA,KAAK,CAACG,IAAN,KAAe,WAAlB,EACA;AACEP,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD;AACF,OARH,EASGO,KATH,CASUC,GAAD,IAAS;AACdV,QAAAA,MAAM,CAACU,GAAD,CAAN;AACD,OAXH;AAYD,KAhBD,CAduC;;AAAA,SAgCzCC,QAhCyC,GAgC9B,CAACC,QAAD,EAAWC,KAAX,EAAkBhB,QAAlB,KACT,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAG/BC,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AAEA,WAAKT,IAAL,CAAU,gCAAV,EAA4C;AAAES,QAAAA,QAAF;AAAYC,QAAAA,KAAZ;AAAmBhB,QAAAA;AAAnB,OAA5C,EACGO,IADH,CACSU,GAAD,IAAS;AACbf,QAAAA,OAAO,CAACe,GAAD,CAAP;AACD,OAHH,EAIGL,KAJH,CAIUC,GAAD,IAAS;AACdV,QAAAA,MAAM,CAACU,GAAD,CAAN;AACD,OANH;AAOD,KAZD,CAjCuC;;AAAA,SAiDzCK,MAjDyC,GAiDhC,MAAM;AACbT,MAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,KApDwC;;AAAA,SAsDzCC,aAtDyC,GAsDzB,MAAM;AACpB,UAAI;AACF,YAAIC,GAAG,GAAGf,YAAY,CAACgB,OAAb,CAAqB,OAArB,CAAV;AACA,YAAIC,MAAM,GAAG/B,UAAU,CAAC6B,GAAD,CAAvB;AACA,eAAOE,MAAP;AACD,OAJD,CAIE,OAAOC,KAAP,EAAc;AACdvB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD;AACF,KA9DwC;;AAAA,SAgEzCuB,OAhEyC,GAgE/B,MAAM;AACd,UAAI,KAAKC,UAAL,EAAJ,EAAuB;AACrB,YAAI,KAAKN,aAAL,GAAqBO,IAArB,KAA8B,OAAlC,EAA2C,OAAO,IAAP,CAA3C,KACK,OAAO,KAAP;AACN,OAHD,MAGO,OAAO,KAAP;AACR,KArEwC;AAAA;;AAAA;;AAwE3C,IAAIC,YAAY,GAAG,IAAIlC,YAAJ,EAAnB;AACA,eAAekC,YAAf","sourcesContent":["import GenericServices from \"./GenericServices\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\"\nclass userServices extends GenericServices {\n  login = (userName, password) =>\n\n\n  // axios.post('http://localhost:5000/auth', {userName, password} )\n  //             .then((res) =>{ \n  //                             // this.data = res.data\n  //                             console.log(res.status);\n  //                             console.log(res.isLoggedin);\n  //                 if(res.isLoggedin){\n  \n  //                     window.location.href = '/welcome ';\n  //                 }});\n\n    new Promise((resolve, reject) => {\n\n      console.log(userName , password);\n\n      axios.post(\"http://localhost:5000/auth\", { userName, password })\n        .then((token) => {\n          localStorage.setItem(\"token\", token);\n          resolve(token);\n          if(token.data === \"connected\")\n          {\n            console.log('Hi')\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n\n  register = (username, email, password) =>\n    new Promise((resolve, reject) => {\n\n\n      console.log(username)\n\n      this.post(\"http://localhost:5000/register\", { username, email, password })\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n\n  // isLoggedin = localStorage.getItem(\"token\") ? true : false;\n\n  logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.href = \"/\";\n  };\n\n  getLoggedinfo = () => {\n    try {\n      let jwt = localStorage.getItem(\"token\");\n      var decode = jwt_decode(jwt);\n      return decode;\n    } catch (error) {\n      console.log(\"error\");\n    }\n  };\n  \n  isAdmin = () => {\n    if (this.isLoggedIn()) {\n      if (this.getLoggedinfo().role === \"admin\") return true;\n      else return false;\n    } else return false;\n  };\n}\n\nlet UserServices = new userServices();\nexport default UserServices;\n"]},"metadata":{},"sourceType":"module"}