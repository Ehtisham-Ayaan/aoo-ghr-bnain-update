{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alpha\\\\OneDrive\\\\myapp\\\\client\\\\src\\\\services\\\\payment.js\";\nimport React from \"react\";\nimport DropIn from \"braintree-web-drop-in-react\";\nimport GenericServices from \"./GenericServices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Payment extends GenericServices {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      clientToken: null\n    };\n  }\n\n  async componentDidMount() {\n    // Get a client token for authorization from your server\n    new Promise((resolve, reject) => {\n      // console.log(username)\n      this.post(\"http://localhost:5000/mycheckout\", {\n        username,\n        email,\n        password,\n        role\n      }).then(res => {\n        resolve(res);\n      }).catch(err => {\n        reject(err);\n      });\n    });\n    const response = await fetch(\"https://localhost:5000/mycheckout\");\n    const clientToken = await response.json(); // If returned as JSON string\n\n    this.setState({\n      clientToken\n    });\n  }\n\n  async buy() {\n    // Send the nonce to your server\n    const {\n      nonce\n    } = await this.instance.requestPaymentMethod();\n    await fetch(`https://localhost:5000/mycheckout/${nonce}`);\n  }\n\n  render() {\n    if (!this.state.clientToken) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(DropIn, {\n          options: {\n            authorization: this.state.clientToken\n          },\n          onInstance: instance => this.instance = instance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.buy.bind(this),\n          children: \"Buy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/alpha/OneDrive/myapp/client/src/services/payment.js"],"names":["React","DropIn","GenericServices","Payment","state","clientToken","componentDidMount","Promise","resolve","reject","post","username","email","password","role","then","res","catch","err","response","fetch","json","setState","buy","nonce","instance","requestPaymentMethod","render","authorization","bind"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;;AAEA,eAAe,MAAMC,OAAN,SAAsBD,eAAtB,CAAsC;AAAA;AAAA;AAAA,SAGpDE,KAHoD,GAG5C;AACPC,MAAAA,WAAW,EAAE;AADN,KAH4C;AAAA;;AAO7B,QAAjBC,iBAAiB,GAAG;AACzB;AAEA,QAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAGhC;AAEA,WAAKC,IAAL,CAAU,kCAAV,EAA8C;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,KAAZ;AAAmBC,QAAAA,QAAnB;AAA8BC,QAAAA;AAA9B,OAA9C,EACGC,IADH,CACSC,GAAD,IAAS;AAChBR,QAAAA,OAAO,CAACQ,GAAD,CAAP;AACE,OAHH,EAIGC,KAJH,CAIUC,GAAD,IAAS;AACjBT,QAAAA,MAAM,CAACS,GAAD,CAAN;AACE,OANH;AAOE,KAZH;AAcA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAD,CAA5B;AACA,UAAMf,WAAW,GAAG,MAAMc,QAAQ,CAACE,IAAT,EAA1B,CAlByB,CAkBkB;;AAE3C,SAAKC,QAAL,CAAc;AACbjB,MAAAA;AADa,KAAd;AAGA;;AAEQ,QAAHkB,GAAG,GAAG;AACX;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAY,MAAM,KAAKC,QAAL,CAAcC,oBAAd,EAAxB;AACA,UAAMN,KAAK,CAAE,qCAAoCI,KAAM,EAA5C,CAAX;AACA;;AAEDG,EAAAA,MAAM,GAAG;AACR,QAAI,CAAC,KAAKvB,KAAL,CAAWC,WAAhB,EAA6B;AAC5B,0BACC;AAAA,+BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cADD;AAKA,KAND,MAMO;AACN,0BACC;AAAA,gCACC,QAAC,MAAD;AACC,UAAA,OAAO,EAAE;AAAEuB,YAAAA,aAAa,EAAE,KAAKxB,KAAL,CAAWC;AAA5B,WADV;AAEC,UAAA,UAAU,EAAEoB,QAAQ,IAAK,KAAKA,QAAL,GAAgBA;AAF1C;AAAA;AAAA;AAAA;AAAA,gBADD,eAKC;AAAQ,UAAA,OAAO,EAAE,KAAKF,GAAL,CAASM,IAAT,CAAc,IAAd,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD;AASA;AACD;;AAxDmD","sourcesContent":["import React from \"react\";\r\nimport DropIn from \"braintree-web-drop-in-react\";\r\nimport GenericServices from \"./GenericServices\";\r\n\r\nexport default class Payment extends GenericServices {\r\n\tinstance;\r\n\r\n\tstate = {\r\n\t\tclientToken: null\r\n\t};\r\n\r\n\tasync componentDidMount() {\r\n\t\t// Get a client token for authorization from your server\r\n\r\n\t\tnew Promise((resolve, reject) => {\r\n\r\n\r\n\t\t\t// console.log(username)\r\n\t  \r\n\t\t\tthis.post(\"http://localhost:5000/mycheckout\", { username, email, password , role})\r\n\t\t\t  .then((res) => {\r\n\t\t\t\tresolve(res);\r\n\t\t\t  })  \r\n\t\t\t  .catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t  });\r\n\t\t  });\r\n\r\n\t\tconst response = await fetch(\"https://localhost:5000/mycheckout\");\r\n\t\tconst clientToken = await response.json(); // If returned as JSON string\r\n\r\n\t\tthis.setState({\r\n\t\t\tclientToken\r\n\t\t});\r\n\t}\r\n\r\n\tasync buy() {\r\n\t\t// Send the nonce to your server\r\n\t\tconst { nonce } = await this.instance.requestPaymentMethod();\r\n\t\tawait fetch(`https://localhost:5000/mycheckout/${nonce}`);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (!this.state.clientToken) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1>Loading...</h1>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<DropIn\r\n\t\t\t\t\t\toptions={{ authorization: this.state.clientToken }}\r\n\t\t\t\t\t\tonInstance={instance => (this.instance = instance)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button onClick={this.buy.bind(this)}>Buy</button>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}